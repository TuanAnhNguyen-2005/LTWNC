@model MVC_Teacher.Models.LoginViewModel
@{
    ViewBag.Title = "Ðãng nh?p";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="auth-container" style="max-width:900px;margin:40px auto;padding:24px;background:white;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06);display:flex;gap:20px;">
    <div style="flex:1;padding:20px;">
        <h2 style="margin-bottom:6px;">Ðãng nh?p</h2>
        @using (Html.BeginForm("Login", "Account", FormMethod.Post, new { @class = "form-login" }))
        {
            @Html.AntiForgeryToken()
            <div class="form-group">
                @Html.LabelFor(m => m.UserNameOrEmail)
                @Html.TextBoxFor(m => m.UserNameOrEmail, new { @class = "form-control", placeholder = "Tài kho?n ho?c email" })
                @Html.ValidationMessageFor(m => m.UserNameOrEmail)
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.Password)
                @Html.PasswordFor(m => m.Password, new { @class = "form-control", placeholder = "M?t kh?u" })
                @Html.ValidationMessageFor(m => m.Password)
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px;">
                <button type="submit" class="btn btn-primary">Ðãng nh?p</button>
                <a href="#" onclick="showTab('forgot');return false;">Quên m?t kh?u?</a>
            </div>
            if (TempData["Success"] != null) { <div style="margin-top:10px;color:green;">@TempData["Success"]</div> }
            if (TempData["Info"] != null) { <div style="margin-top:10px;color:#555;">@TempData["Info"]</div> }
        }
    </div>

    <div style="width:1px;background:#eef0f3;"></div>

    <div style="flex:1;padding:20px;">
        <h2 style="margin-bottom:6px;">Ðãng k?</h2>
        @Html.Partial("_RegisterPartial", new MVC_Teacher.Models.RegisterViewModel())
    </div>
</div>

@section scripts {
    <script>
        function showTab(tab) {
            // page currently shows both; you can expand to tab UI if desired.
            if (tab === 'forgot') {
                // open modal or redirect to a fragment:
                var email = prompt('Nh?p email ð? nh?n hý?ng d?n ð?t l?i m?t kh?u:');
                if (!email) return;
                var form = document.createElement('form');
                form.method = 'post';
                form.action = '@@Url.Action("ForgotPassword","Account")';
                var token = document.createElement('input');
                token.type = 'hidden';
                token.name = '__RequestVerificationToken';
                token.value = '@@AntiForgeryTokenValue()';
                form.appendChild(token);
                var emailInput = document.createElement('input');
                emailInput.type = 'hidden';
                emailInput.name = 'Email';
                emailInput.value = email;
                form.appendChild(emailInput);
                document.body.appendChild(form);
                form.submit();
            }
        }

        // helper to get AntiForgeryToken value for JS form
        function AntiForgeryTokenValue() {
            var el = document.querySelector('input[name="__RequestVerificationToken"]');
            return el ? el.value : '';
        }
    </script>
}